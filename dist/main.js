(()=>{"use strict";const e=function({timing:e,draw:t,duration:s}){const o=performance.now();requestAnimationFrame((function l(n){let i=(n-o)/s;i>1&&(i=1);const r=e(i);t(r),i<1&&requestAnimationFrame(l)}))};[...document.querySelectorAll(".close")].forEach((e=>{if(e.closest(".popup")){const t=e.closest(".popup");e.addEventListener("click",(()=>{t.style.visibility="hidden"}))}})),(()=>{const t=document.querySelector(".header-contacts__arrow"),s=document.querySelector(".header-contacts__phone-number-accord"),o=[...s.children][0];s.style.top="0px",t.addEventListener("click",(()=>{"0px"===s.style.top?(t.style.transform="rotateX(180deg)",e({duration:100,timing:e=>e,draw(e){s.style.top=20*e+"px"}}),o.style.opacity=1):(t.style.transform="",e({duration:100,timing:e=>e,draw(e){s.style.top=20-20*e+"px"}}),o.style.opacity=0)}))})(),(()=>{const e=document.querySelector(".popup-menu"),t=e.querySelector(".popup-dialog-menu"),s=document.querySelectorAll(".menu"),o=e.querySelector(".close-menu"),l=document.querySelector(".button-footer"),n=[...document.querySelectorAll(".link-list")];let i=!1;const r=()=>{i?(e.style.visibility="",t.style.transform="",i=!i):(e.style.visibility="visible",t.style.transform="translate3d(0,0,0)",i=!i)};e.addEventListener("click",(e=>{const t=e.target;n.some((e=>e.contains(t)))?r():t.matches(".menu-link")?(e.preventDefault(),document.querySelector(t.getAttribute("href")).scrollIntoView({behavior:"smooth",block:"nearest"}),r()):t===o&&r()})),s.forEach((e=>e.addEventListener("click",(()=>{r()})))),l.addEventListener("click",(e=>{const t=l.querySelector("a"),s=document.querySelector(t.getAttribute("href"));e.preventDefault(),s.scrollIntoView({behavior:"smooth",block:"nearest"})}))})(),fetch("db.json").then((e=>e.json())).then((e=>(e=>{const t=e[0].date.split(".");console.log(e);const s=[t[0],(o=t[1],["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"][parseInt(o)-1]),t[2]].join(" ");var o;const l=e.slice(1,7),n=document.querySelector(".nav-list-popup-repair"),i=document.querySelector(".popup-repair-types-content__head-date"),r=document.querySelector(".popup-repair-types-content-table"),c=(e=>{const t=[];return e.forEach((e=>{const s=document.createElement("button");s.classList.add("button-o"),s.classList.add("popup-repair-types-nav__item"),s.textContent=e,t.push(s)})),t})(l.map((e=>e.title))),a=(e=>{const t=[];for(const s of e){const e=document.createElement("table"),o=document.createElement("tbody");e.appendChild(o),e.classList.add("popup-repair-types-content-table__list"),s.forEach((t=>{const{typeService:s,units:o,cost:l}=t,n=document.createElement("tr");n.classList.add("mobile-row");const i=document.createElement("td");i.classList.add("repair-types-name"),i.textContent=s;const r=document.createElement("td");r.classList.add("repair-types-value"),r.insertAdjacentHTML("afterbegin","2"===o[1]?o[0]+`<sup>${o[1]}</sup>`:o);const c=document.createElement("td");c.classList.add("repair-types-value"),c.textContent=l+" руб.",n.appendChild(i),n.appendChild(r),n.appendChild(c),[...e.children][0].appendChild(n)})),t.push(e)}return t})(l.map((e=>e.priceList)));n.textContent="",c.forEach((e=>n.appendChild(e))),i.textContent=s,r.textContent="",a.forEach((e=>r.appendChild(e))),(()=>{const e=document.querySelector(".nav-list-popup-repair"),t=[...e.children],s=[...document.querySelectorAll(".popup-repair-types-content-table__list")];e.addEventListener("click",(e=>{const o=e.target;if(o.closest(".popup-repair-types-nav__item")){const e=o.closest(".popup-repair-types-nav__item");document.querySelector(".popup-repair-types-content__head-title").textContent=e.textContent,t.forEach(((t,o)=>{s[o].style.display=t===e?"block":"none"}))}})),t[0].click()})()})(e))),(()=>{const e=[...document.querySelectorAll(".link-list")],t=document.querySelector(".popup-repair-types");e.forEach((e=>e.addEventListener("click",(()=>{t.style.visibility="visible"}))))})(),((e="+7 (___) ___-__-__")=>{const t=document.querySelectorAll("input[name=phone]"),s=t=>{const s=t.target,o=t.keyCode,l=e,n=l.replace(/\D/g,""),i=s.value.replace(/\D/g,"");let r=0,c=l.replace(/[_\d]/g,(e=>r<i.length?i.charAt(r++)||n.charAt(r):e));r=c.indexOf("_"),-1!==r&&(c=c.slice(0,r));let a=l.substr(0,s.value.length).replace(/_+/g,(e=>"\\d{1,"+e.length+"}")).replace(/[+()]/g,"\\$&");a=new RegExp("^"+a+"$"),(!a.test(s.value)||s.value.length<5||o>47&&o<58)&&(s.value=c),"blur"===t.type&&s.value.length<5&&(s.value="")};for(const e of t)e.addEventListener("input",s),e.addEventListener("focus",s),e.addEventListener("blur",s)})(),(()=>{const t=document.querySelectorAll("form");for(const s of t){const t=s.querySelector(".checkbox__descr").querySelector(".link-privacy"),o=document.querySelector(".popup-privacy"),l=s.querySelector(".button"),n=s.querySelector(".checkbox__input"),i=[...s.querySelectorAll("input")].filter((e=>"checkbox"!==e.type)),r=[...s.querySelectorAll("input[name=name]")];for(const e of r)e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[^а-яё ]/gi,"")}));const c=e=>{if(e.checked)return!0;{const t=e.nextElementSibling;return t.style.border="1px solid red",setTimeout((()=>t.style.border=""),1e3),!1}},a=(e=[])=>2===e.length?e[0].value.length>=2&&18===e[1].value.length||(e[0].style.border="1px solid red",e[1].style.border="1px solid red",setTimeout((()=>e[0].style.border=""),1e3),setTimeout((()=>e[1].style.border=""),1e3),!1):18===e[0].value.length||(e[0].style.border="1px solid red",setTimeout((()=>e[0].style.border=""),1e3),!1),d=t=>{const s={};2===t.length?(s.name=t[0].value,s.phone=t[1].value):s.phone=t[0].value,fetch("../../server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((t=>{if(200!==t.status)throw new Error("error");const s=document.querySelector(".popup-thank");s.style.visibility="visible",s.style.opacity=0,e({duration:400,timing:e=>e,draw(e){s.style.opacity=e}}),setTimeout((()=>{e({duration:500,timing:e=>e,draw(e){s.style.opacity=1-e}})}),2e3),setTimeout((()=>s.style.visibility="hidden"),2500),i.forEach((e=>e.value="")),n.checked=!1}))};l.addEventListener("click",(e=>{e.preventDefault(),c(n)&&a(i)&&d(i)})),t.addEventListener("click",(()=>{o.style.visibility="visible"}))}})(),(()=>{const e=[...document.querySelectorAll(".button")].filter((e=>"Проконсультироваться"===e.textContent)),t=document.querySelector(".popup-consultation");e.forEach((e=>{e.addEventListener("click",(()=>{t.style.visibility="visible"}))}))})(),document.querySelector(".accordion").addEventListener("click",(e=>{const t=e.target;t.matches(".title_block")&&t.classList.toggle("msg-active")})),(()=>{const t=(t,s)=>{if(document.documentElement.clientWidth<=1024)return;const o=t.target.closest(`${s}__icon`),l=o.querySelector(`${s}__icon-inner`),n=o.querySelector(`${s}__icon-inner-text`),i=o.querySelector(`${s}-popup`),r=document.head.querySelector(`#${i.classList[1]}`),c=i.getBoundingClientRect(),a=o.closest(".row");if(c.top<0){if(r&&0!==r.textContent)r.textContent=`\n                .${i.classList[1]}::before {\n                    transform: rotate(180deg);\n                }\n                `;else{const e=document.createElement("style");e.id=i.classList[1],e.textContent=`\n                    .${i.classList[1]}::before {\n                        transform: rotate(180deg);\n                    }\n                `,document.head.appendChild(e)}i.style.transform=".problems-item"!==s?"translateY(165%)":"translateY(130%)",i.style.paddingTop="35px",a.style.zIndex=1}i.style.visibility="visible",".problems-item"!==s&&(n.style.color="white"),l.style.opacity=1,e({duration:100,timing:e=>e,draw(e){i.style.opacity=e}})},s=(t,s)=>{if(document.documentElement.clientWidth<=1024)return;const o=t.target.closest(`${s}__icon`),l=o.querySelector(`${s}__icon-inner`),n=o.querySelector(`${s}__icon-inner-text`),i=o.querySelector(`${s}-popup`),r=document.head.querySelector(`#${i.classList[1]}`),c=o.closest(".row");".problems-item"!==s&&(n.style.color="black"),l.style.opacity=0,r&&setTimeout((()=>{r.textContent="",i.style.transform=""}),200),e({duration:100,timing:e=>e,draw(e){i.style.opacity=1-e}}),setTimeout((()=>{i.style.paddingTop="",i.style.visibility="hidden",c.style.zIndex=0}),200)};document.querySelectorAll(".problems-item__icon").forEach((e=>{e.addEventListener("mouseenter",(e=>t(e,".problems-item"))),e.addEventListener("mouseleave",(e=>s(e,".problems-item")))})),document.querySelectorAll(".formula-item__icon").forEach((e=>{e.addEventListener("mouseenter",(e=>t(e,".formula-item"))),e.addEventListener("mouseleave",(e=>s(e,".formula-item")))}))})(),(()=>{const t=document.querySelector(".formula"),s=document.querySelector(".formula-slider"),o=[...s.children];var l,n;n=o,(l=s).style.display="flex",l.style.position="relative",l.style.margin="0 auto",n.forEach(((e,t)=>{t>2&&(e.style.display="none"),1===t&&e.classList.add("active-item")})),t.addEventListener("click",(e=>(e=>{const t=e.target;t.closest("#formula-arrow_right")?(e=>{const t=o.filter((e=>e.classList.contains("active-item"))),s=o.indexOf(t[0]);s+2===o.length?(e[s+1].style.display="none",e[s].classList.remove("active-item"),e[s].style.display="none",e[s-1].style.display="none",e[0].style.display="flex",e[1].style.display="flex",e[1].classList.add("active-item"),e[2].style.display="flex"):(e[s].classList.remove("active-item"),e[s-1].style.display="none",e[s+2].style.display="flex",e[s+1].classList.add("active-item"))})(o):t.closest("#formula-arrow_left")&&(e=>{const t=e.filter((e=>e.classList.contains("active-item"))),s=e.indexOf(t[0]);1===s?(e[s].classList.remove("active-item"),e[s].style.display="none",e[s-1].style.display="none",e[s+1].style.display="none",e[o.length-1].style.display="flex",e[o.length-2].style.display="flex",e[o.length-2].classList.add("active-item"),e[o.length-3].style.display="flex"):(e[s].classList.remove("active-item"),e[s+1].style.display="none",e[s-1].style.display="flex",e[s-1].classList.add("active-item"),e[s-2].style.display="flex")})(o)})(e))),document.querySelectorAll(".problems-item__icon").forEach((t=>{t.addEventListener("mouseenter",(t=>((t,s)=>{const o=t.target.querySelector(`${s}-popup`),l=t.target.closest(s);o.style.visibility="visible",t.target.closest(".formula-item-popup ")||(l.classList.add("active-item"),e({duration:300,timing:e=>e,draw(e){l.style.opacity=e}}),e({duration:300,timing:e=>e,draw(e){o.style.opacity=e}}))})(t,".problems-item"))),t.addEventListener("mouseleave",(t=>((t,s)=>{const o=t.target.querySelector(`${s}-popup`),l=t.target.closest(s);t.target.closest(".formula-item-popup ")||(l.classList.remove("active-item"),e({duration:300,timing:e=>e,draw(e){l.style.opacity=1-e+.4}}),e({duration:300,timing:e=>e,draw(e){o.style.opacity=1-e}}),setTimeout((()=>o.style.visibility="hidden"),350))})(t,".problems-item")))}))})(),document.querySelector(".designs").addEventListener("click",(e=>{const t=e.target;t.closest(".preview-block__item")&&(e=>{const t=document.querySelector(".designs-slider"),s=e.closest(".preview-block");let o;[...t.children].forEach((e=>{"block"===e.style.display&&(o=[...e.children])})),[...s.children].forEach(((t,s)=>{t===e?(o[s].classList.add("slider-active"),o[s].classList.remove("slider-disabled"),[...t.children][0].classList.add("preview_active")):(o[s].classList.add("slider-disabled"),o[s].classList.remove("slider-active"),[...t.children][0].classList.remove("preview_active"))}))})(t.closest(".preview-block__item"))}))})();